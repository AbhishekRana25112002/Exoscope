{% extends 'base.html' %}
{% load static %}

{% block title %}Exoplanet Detection Analytics{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/results.css' %}">
{% endblock %}

{% block content %}
    <!-- Hero Section -->
    <div class="hero text-center">
        <div class="container">
            <h1 class="display-4 mb-3"><i class="fas fa-globe-americas"></i> Exoplanet Detection Models</h1>
            <p class="lead">Comparative analysis of CNN, ANN, and traditional machine learning approaches</p>
        </div>
    </div>

    <div class="container">
        <!-- Navigation Pills -->
        <ul class="nav nav-pills mb-4 justify-content-center" id="modelTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="cnn-tab" data-bs-toggle="pill" data-bs-target="#cnn" type="button" role="tab">CNN</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="ann-tab" data-bs-toggle="pill" data-bs-target="#ann" type="button" role="tab">ANN</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="traditional-tab" data-bs-toggle="pill" data-bs-target="#traditional" type="button" role="tab">Traditional ML</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="comparison-tab" data-bs-toggle="pill" data-bs-target="#comparison" type="button" role="tab">Comparison</button>
            </li>
        </ul>

        <!-- Tab Content -->
        <div class="tab-content" id="modelTabsContent">
            <!-- CNN Tab -->
            <div class="tab-pane fade show active" id="cnn" role="tabpanel">
                <h2 class="section-title"><i class="fas fa-network-wired"></i> Convolutional Neural Network</h2>
                
                <div class="model-highlight">
                    <h5><i class="fas fa-lightbulb"></i> Key Features</h5>
                    <ul>
                        <li>Two-channel input (original + smoothed light curves)</li>
                        <li>Four Conv1D layers with Batch Normalization</li>
                        <li>Custom batch generation with time-shift augmentation</li>
                        <li>Two-phase learning rate strategy</li>
                    </ul>
                </div>
                
                <div class="row">
                    <div class="col-md-6">
                        <div class="metric-card">
                            <h4><i class="fas fa-tachometer-alt"></i> Performance Metrics</h4>
                            <div class="metric-item">
                                <div class="metric-label">
                                    <span>Accuracy</span>
                                    <span class="metric-value">0.9965</span>
                                </div>
                                <div class="progress">
                                    <div class="progress-bar" style="width: 99.65%"></div>
                                </div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-label">
                                    <span>Precision</span>
                                    <span class="metric-value">0.7143</span>
                                </div>
                                <div class="progress">
                                    <div class="progress-bar" style="width: 71.43%"></div>
                                </div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-label">
                                    <span>Recall</span>
                                    <span class="metric-value">1.0000</span>
                                </div>
                                <div class="progress">
                                    <div class="progress-bar" style="width: 100%"></div>
                                </div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-label">
                                    <span>F1 Score</span>
                                    <span class="metric-value">0.8333</span>
                                </div>
                                <div class="progress">
                                    <div class="progress-bar" style="width: 83.33%"></div>
                                </div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-label">
                                    <span>ROC AUC</span>
                                    <span class="metric-value">0.9986</span>
                                </div>
                                <div class="progress">
                                    <div class="progress-bar" style="width: 99.86%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="metric-card">
                            <h4><i class="fas fa-chart-radar"></i> Metrics Radar</h4>
                            <canvas id="cnnRadarChart"></canvas>
                        </div>
                    </div>
                </div>
                
                <div class="row mt-3">
                    <div class="col-md-12">
                        <div class="metric-card">
                            <h4><i class="fas fa-info-circle"></i> Strengths & Considerations</h4>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="alert alert-success">
                                        <h5><i class="fas fa-check-circle"></i> Strengths</h5>
                                        <ul>
                                            <li>Perfect recall - detects all exoplanets</li>
                                            <li>Excellent accuracy (99.65%)</li>
                                            <li>Robust to time-series variations</li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="alert alert-warning">
                                        <h5><i class="fas fa-exclamation-triangle"></i> Considerations</h5>
                                        <ul>
                                            <li>Lower precision (71.43%) means more false positives</li>
                                            <li>Computationally intensive</li>
                                            <li>Requires careful hyperparameter tuning</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ANN Tab -->
            <div class="tab-pane fade" id="ann" role="tabpanel">
                <h2 class="section-title"><i class="fas fa-brain"></i> Artificial Neural Network</h2>
                
                <div class="model-highlight">
                    <h5><i class="fas fa-lightbulb"></i> Key Features</h5>
                    <ul>
                        <li>SMOTE applied to balance dataset</li>
                        <li>Two hidden layers (128 & 64 neurons)</li>
                        <li>Dropout regularization (0.3)</li>
                        <li>Sigmoid output for binary classification</li>
                    </ul>
                </div>
                
                <div class="row">
                    <div class="col-md-4">
                        <div class="metric-card">
                            <h4><i class="fas fa-tachometer-alt"></i> Key Metrics</h4>
                            <div class="metric-item">
                                <div class="metric-label">
                                    <span>Accuracy</span>
                                    <span class="metric-value">0.9847</span>
                                </div>
                                <div class="progress">
                                    <div class="progress-bar" style="width: 98.47%"></div>
                                </div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-label">
                                    <span>Precision</span>
                                    <span class="metric-value">0.9707</span>
                                </div>
                                <div class="progress">
                                    <div class="progress-bar" style="width: 97.07%"></div>
                                </div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-label">
                                    <span>Recall</span>
                                    <span class="metric-value">0.9988</span>
                                </div>
                                <div class="progress">
                                    <div class="progress-bar" style="width: 99.88%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-8">
                        <div class="metric-card">
                            <h4><i class="fas fa-chart-bar"></i> Performance Visualization</h4>
                            <canvas id="annBarChart"></canvas>
                        </div>
                    </div>
                </div>
                
                <div class="row mt-3">
                    <div class="col-md-6">
                        <div class="metric-card">
                            <h4><i class="fas fa-project-diagram"></i> Model Architecture</h4>
                            <div class="text-center">
                                <img src="https://via.placeholder.com/500x300?text=ANN+Architecture+Diagram" alt="ANN Architecture" class="img-fluid rounded">
                            </div>
                            <ul class="mt-3">
                                <li><strong>Input Layer:</strong> Time-series flux values</li>
                                <li><strong>Hidden Layer 1:</strong> 128 neurons, ReLU</li>
                                <li><strong>Hidden Layer 2:</strong> 64 neurons, ReLU</li>
                                <li><strong>Output Layer:</strong> 1 neuron, Sigmoid</li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="metric-card">
                            <h4><i class="fas fa-balance-scale"></i> SMOTE Impact</h4>
                            <table class="table table-bordered">
                                <thead class="table-light">
                                    <tr>
                                        <th>Metric</th>
                                        <th>Before SMOTE</th>
                                        <th>After SMOTE</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Recall</td>
                                        <td>0.0000</td>
                                        <td>0.9988</td>
                                    </tr>
                                    <tr>
                                        <td>Precision</td>
                                        <td>N/A</td>
                                        <td>0.9707</td>
                                    </tr>
                                    <tr>
                                        <td>F1 Score</td>
                                        <td>0.0000</td>
                                        <td>0.9845</td>
                                    </tr>
                                </tbody>
                            </table>
                            <div class="alert alert-info mt-3">
                                <i class="fas fa-info-circle"></i> SMOTE (Synthetic Minority Oversampling Technique) significantly improved model performance on the minority class (exoplanet-positive samples).
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Traditional ML Tab -->
            <div class="tab-pane fade" id="traditional" role="tabpanel">
                <h2 class="section-title"><i class="fas fa-chart-line"></i> Traditional Machine Learning</h2>
                
                <div class="row">
                    <div class="col-md-12">
                        <div class="metric-card">
                            <h4><i class="fas fa-table"></i> Model Comparison (After SMOTE)</h4>
                            <div class="table-responsive">
                                <table class="table table-bordered table-hover">
                                    <thead class="table-light">
                                        <tr>
                                            <th>Model</th>
                                            <th>Accuracy</th>
                                            <th>Precision</th>
                                            <th>Recall</th>
                                            <th>F1 Score</th>
                                            <th>ROC AUC</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>K-Nearest Neighbors</td>
                                            <td>0.9823</td>
                                            <td>0.96</td>
                                            <td>1.00</td>
                                            <td>0.98</td>
                                            <td>0.99</td>
                                        </tr>
                                        <tr>
                                            <td>Decision Tree</td>
                                            <td>0.9339</td>
                                            <td>0.90</td>
                                            <td>0.98</td>
                                            <td>0.94</td>
                                            <td>0.96</td>
                                        </tr>
                                        <tr>
                                            <td>Logistic Regression</td>
                                            <td>0.7531</td>
                                            <td>0.71</td>
                                            <td>0.82</td>
                                            <td>0.76</td>
                                            <td>0.85</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="row mt-3">
                    <div class="col-md-6">
                        <div class="metric-card">
                            <h4><i class="fas fa-chart-pie"></i> Accuracy Distribution</h4>
                            <canvas id="traditionalPieChart"></canvas>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="metric-card">
                            <h4><i class="fas fa-exchange-alt"></i> Before vs After SMOTE</h4>
                            <ul class="nav nav-tabs" id="smoteTabs" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link active" id="knn-tab" data-bs-toggle="tab" data-bs-target="#knn" type="button">KNN</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="dt-tab" data-bs-toggle="tab" data-bs-target="#dt" type="button">Decision Tree</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="lr-tab" data-bs-toggle="tab" data-bs-target="#lr" type="button">Logistic Regression</button>
                                </li>
                            </ul>
                            <div class="tab-content p-3 border border-top-0 rounded-bottom">
                                <div class="tab-pane fade show active" id="knn" role="tabpanel">
                                    <p><strong>Before SMOTE:</strong> Accuracy=0.9912, Recall=0.0</p>
                                    <p><strong>After SMOTE:</strong> Accuracy=0.9823, Recall=1.00</p>
                                </div>
                                <div class="tab-pane fade" id="dt" role="tabpanel">
                                    <p><strong>Before SMOTE:</strong> Accuracy=0.9614, Recall=0.0</p>
                                    <p><strong>After SMOTE:</strong> Accuracy=0.9339, Recall=0.98</p>
                                </div>
                                <div class="tab-pane fade" id="lr" role="tabpanel">
                                    <p><strong>Before SMOTE:</strong> Accuracy=0.9912, Recall=0.0</p>
                                    <p><strong>After SMOTE:</strong> Accuracy=0.7531, Recall=0.82</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Comparison Tab -->
            <div class="tab-pane fade" id="comparison" role="tabpanel">
                <h2 class="section-title"><i class="fas fa-balance-scale-left"></i> Model Comparison</h2>
                
                <div class="row">
                    <div class="col-md-12">
                        <div class="metric-card">
                            <h4><i class="fas fa-chart-bar"></i> Performance Across Models</h4>
                            <canvas id="comparisonBarChart"></canvas>
                        </div>
                    </div>
                </div>
                
                <div class="row mt-3">
                    <div class="col-md-6">
                        <div class="metric-card">
                            <h4><i class="fas fa-trophy"></i> Best Performers</h4>
                            <div class="alert alert-success">
                                <h5><i class="fas fa-crown"></i> CNN Model</h5>
                                <ul>
                                    <li>Highest Accuracy: 99.65%</li>
                                    <li>Perfect Recall: 100%</li>
                                    <li>Best ROC AUC: 0.9986</li>
                                </ul>
                            </div>
                            <div class="alert alert-info">
                                <h5><i class="fas fa-medal"></i> ANN Model</h5>
                                <ul>
                                    <li>Best Precision: 97.07%</li>
                                    <li>Excellent F1 Score: 98.45%</li>
                                    <li>Great balance across metrics</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="metric-card">
                            <h4><i class="fas fa-chart-line"></i> Trade-off Analysis</h4>
                            <canvas id="tradeoffChart"></canvas>
                            <div class="mt-3">
                                <p><strong>Key Insight:</strong> CNN achieves perfect recall but with lower precision, while ANN provides the best balance between precision and recall.</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="row mt-3">
                    <div class="col-md-12">
                        <div class="metric-card">
                            <h4><i class="fas fa-clipboard-check"></i> Model Selection Guide</h4>
                            <div class="table-responsive">
                                <table class="table table-bordered">
                                    <thead class="table-light">
                                        <tr>
                                            <th>Use Case</th>
                                            <th>Recommended Model</th>
                                            <th>Reason</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Maximize exoplanet detection (minimize false negatives)</td>
                                            <td>CNN</td>
                                            <td>Perfect recall (100%) ensures no exoplanets missed</td>
                                        </tr>
                                        <tr>
                                            <td>Balance between precision and recall</td>
                                            <td>ANN</td>
                                            <td>Excellent F1 score (98.45%) and high precision (97.07%)</td>
                                        </tr>
                                        <tr>
                                            <td>Quick implementation with good performance</td>
                                            <td>KNN (SMOTE)</td>
                                            <td>98.23% accuracy with simpler implementation</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{% static 'js/results.js' %}"></script>
 {% endblock %}